#summary A guide to common JAASmine use cases.
#labels Restrict-View-Commit

<wiki:toc max_depth="2"/>

= Getting Started =
All JAASmine use cases share a few fundamental requirements:
== create a SPN ==
create a service principal name (SPN) using the active directory users and computers administration application.  we recommend creating a computer account with a non-expiring password.

*NOTE:* when needing to use encryption type des-cbc-md5, you should create a user account rather than a computer account, as this cannot be set for a computer type account

== create a keytab ==
 # create a keytab using the ktpass utility at windows command line: {{{ktpass -princ HTTP/machine-name.yourdomain.edu@AD.YOURDOMAIN.EDU -mapuser YOURREALM\service-username$ -mapop set +rndPass -out s:\path-to-file\service-username.keytab -crypto RC4-HMAC-NT}}}
 # copy keytab to {{{$CATALINA_BASE/conf}}}

*NOTE:* to specify a password, use the -pass parameter (followed by the password), rather than using the +rndPass parameter, which randomly generates one.

*NOTE:* to inspect the SPNs specify the list option on the setspn utility at the windows command line ({{{setspn -L service-username}}})

*NOTE:* the principal must match to machine name (is this true?)

*NOTE:* the computer account must match the one created above

== create a jaas.conf ==
# configure {{{jaas.conf}}} to accept SPNego tokens
# copy {{{jaas.conf}}} to {{{$CATALINA_BASE/conf}}}
{{{
todo:show file
}}}

*NOTE:* the keytab file path and name must match one created above

*NOTE:* the principal must match the SPN specified in the keytab created above

== create krb5.conf ==
# configure {{{krb5.conf}}} to accept SPNego tokens
# copy {{{krb5.conf}}} to {{{$CATALINA_BASE/conf}}}
{{{
todo:show file
}}}

== create setenv.sh =
# configure {{{setenv.sh}}} to take the system props needed for krb5 authN
# copy {{{setenv.sh}}} to {{{$CATALINA_BASE/bin}}}
{{{
todo:show file
}}}

*NOTE:* the path to {{{java.security.krb5.conf}}} will vary

*NOTE:* the path to {{{java.security.auth.login.config}}} will vary

*NOTE:* the path to {{{CATALINA_PID}}} will vary

= Securing Web Services with JAASmine =

= Securing uPortal with JAASmine =

= Securing Kuali Rice with JAASmine =
 # deploy custom rice LoginFilter
 # add JAASmine login filter
 # configure web.xml for rice
 # update rice-config.xml to use the LoginFilter
 # restart tomcat